import{r as a,d as w,c as p,a as e,w as u,v as i,b as _,t as c,F as x,o as m}from"./index-DLBzkcCo.js";import{a as v}from"./axios-DsPaXkF5.js";const $=e("h1",null,"Todo API",-1),V=e("h2",null,"註冊",-1),b=e("br",null,null,-1),T=e("h2",null,"登入",-1),U=e("br",null,null,-1),f=e("h2",null,"驗證登入",-1),I={key:0},F={key:1},d="https://todolist-api.hexschool.io",E={__name:"todoView",setup(N){const s=a({email:"",password:"",nickname:""}),g=a(""),h=async()=>{console.log(`${d}/users/sign_up`);try{const o=await v.post(`${d}/users/sign_up`,s.value);console.log(o),g.value=o.data.uid}catch(o){console.log(o)}},t=a({email:"",password:""}),k=a(""),y=async()=>{console.log(`${d}/users/sign_in`);try{const o=await v.post(`${d}/users/sign_in`,t.value);console.log(o),k.value=o.data.token,document.cookie=`customTodoToken=${o.data.token};`}catch(o){console.log(o)}},r=a({nickname:"",uid:""});return w(async()=>{const o=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");console.log(o);const l=await v.get(`${d}/users/checkout`,{headers:{Authorization:o}});console.log(l),r.value=l.data}),(o,l)=>(m(),p(x,null,[$,e("div",null,[V,u(e("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[0]||(l[0]=n=>s.value.email=n)},null,512),[[i,s.value.email]]),u(e("input",{type:"text",placeholder:"Password","onUpdate:modelValue":l[1]||(l[1]=n=>s.value.password=n)},null,512),[[i,s.value.password]]),u(e("input",{type:"text",placeholder:"nickname","onUpdate:modelValue":l[2]||(l[2]=n=>s.value.nickname=n)},null,512),[[i,s.value.nickname]]),b,e("button",{type:"button",onClick:h},"註冊"),_(" uid: "+c(g.value),1)]),e("div",null,[T,u(e("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[3]||(l[3]=n=>t.value.email=n)},null,512),[[i,t.value.email]]),u(e("input",{type:"text",placeholder:"Password","onUpdate:modelValue":l[4]||(l[4]=n=>t.value.password=n)},null,512),[[i,t.value.password]]),U,e("button",{type:"button",onClick:y},"登入"),_(" uid: "+c(k.value),1)]),e("div",null,[f,r.value.uid?(m(),p("div",I,[e("p",null,"UID:"+c(r.value.uid),1),e("p",null,"NickName:"+c(r.value.nickname),1)])):(m(),p("div",F,"你還沒有登入"))])],64))}};export{E as default};
